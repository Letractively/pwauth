#summary Main Installation Instructions

= Installation Instructions =

==1. Edit the config.h file==

All configuration of pwauth is done via the config.h file.  You should set or check the following variables:

===1.1. Set Authentication Method ===

What API should authentication be done through?  The most common options are:

 * SHADOW_SUN:  This is the shadow password system in Solaris, Linux and IRIX 5.3 systems.  It uses getspnam() to fetch passwords and crypt() to encrypt them.

 * SHADOW_BSD: This is the shadow password system in BSDI, NetBSD, OpenBSD, and FreeBSD.  This uses getpwnam() to fetch passwords and crypt() to encrypt them.  This would only work with OS X if the accounts being authenticated are configured with legacy crypt style passwords.  In general, the PAM option is more likely to be usable in OS X.

 * PAM: Talk to the authentication system through PAM - the plug-in authentication module interface.  This exists on Linux, Solaris 7, FreeBSD, and OS X.  You'll need to create /etc/pam.d/pwauth or edit /etc/pam.config to include entries for pwauth.  If you are using PAM to authenticate out of something you don't need to be root to access, then you might use instead Ingo Lutkebohle's mod_auth_pam.c module.  If you are using Solaris, you may need to use PAM_SOLARIS or PAM_SOLARIS_26 instead to work around various bugs.

 * LOGIN_CONF_OPENBSD:  Many BSD derived systems use a login.conf file to configure authentication instead of (or in addition to) PAM.  We currently support authentication through this mechanism only for OpenBSD.  Of course, if you login.conf configuration is standard, you can just use SHADOW_BSD, but if you want pwauth to respect settings in login.conf this option can be used instead.  The API used here, is however, pretty much unique to OpenBSD and will not work on NetBSD or FreeBSD.

There are several other more obscure methods used which are documented in the config.h file.

In most cases the method that you want if you just want to authenticate from the system password file is SHADOW_SUN or SHADOW_BSD depending on your Unix version.  PAM is slower and more complex to set up, but allows greater flexibility in configuration and allows you to authenticate from other sources.

===1.2. Set Failure Logging ===

A failure log keeps a count of how many bad logins have been attempted for each user,
and disables logins to any account where some limit is exceeded.  This is useful to
prevent people from trying to guessing passwords by trying every word in the dictionary, but it can be a problem because it means anyone can disable any user account just by trying some bad passwords on it.

A few Unix systems, like OpenBSD, have failure logs for normal logins to the system, and pwauth can be configured to tie into them.  But it is also possible to set up pwauth to use it's own failure log even on systems that don't have one for normal logins.

If you choose to use this, it would probably be good to have your CGI's run the "checkfaillog" program after successful logins to report the count of bad logins and to reset the count to zero.

I think most installations don't use this and it should not be enabled with PAM, which performs this function at a lower level.


===1.3. Set Lastlog Logging ===

Nearly all Unix systems maintain a lastlog file that keeps record of the last time that each user logged into the system.  It is possible to have pwauth update this when successful authentications occur.  This can be important on systems where you expire unused accounts and some users may only log in via the web.

This should not be enabled with PAM, where this is done at a lower level.

= THIS PAGE IS INCOMPLETE =